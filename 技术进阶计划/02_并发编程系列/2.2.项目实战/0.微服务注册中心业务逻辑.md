## 前言
这一篇主要来介绍微服务注册中心的一些核心业务逻辑
## 课程目标与优缺点


  


## 1.Register-Server
>注册中心服务端


注册中心的核心是维护一个注册表信息，注册表中是一个Map结构，Map<String,Map<String,ServiceInstance>>,其中key为serviceName,内部Map<String,ServiceInstance>中key为serviceId
### 1.1.注册功能
 - 添加：注册成功的时候，向注册表中添加一个实例，若存在则更新
 - 删除：若该服务实例长时间没有更新则从注册表中删除。
 - 获取：基于`serviceName`和`serviceId`获取指定实例

### 1.2.心跳检测
> 服务实例会间隔一段时间向服务端发送一个心跳，若服务长时间未发送心跳，则会进行剔除功能

### 1.3.存活状态检测
> 后台线程通定时去检查注册表信息判断服务实例是否存活，若不再存活则剔除

### 1.4.自我保护机制
> 若注册表中的服务实例的存货比例超过一定的阈值，则会任务可能是网络或者服务端出现异常，则不进行服务实例的摘除


## 2.Register-Client
> 注册中心客户端